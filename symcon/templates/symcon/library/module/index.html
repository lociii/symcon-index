{% extends 'symcon/base.html' %}
{% load i18n %}

{% block content %}
    <div class="row bottom-buffer">
        <div class="col-md-8">
            <h1>
                {% if item.title %}
                    {{ item.title }}
                {% else %}
                    {{ item.name }}
                {% endif %}
            </h1>
            <hr>

            {% if item.description %}
                <p>{{ item.description }}</p>
                <hr>
            {% endif %}

            {% if item.readme_html %}
                {{ item.readme_html|safe }}
            {% else %}
                <div class="alert alert-warning">
                    {% trans "No readme found" %}
                </div>
            {% endif %}
        </div>
        <div class="col-md-4">
            {% include "symcon/_owner_info.html" with repository=item.library.repository %}
            {% include "symcon/_howto_install.html" %}

            <ul class="module-details">
                {% if item.title %}
                    <li>
                        {{ item.name }}
                    </li>
                {% endif %}
                {% if item.vendor %}
                    <li>
                        {% blocktrans with value=item.vendor %}Published by <i>{{ value }}</i>{% endblocktrans %}
                    </li>
                {% endif %}
                {% if item.library.author %}
                    <li>
                        {% blocktrans with value=item.library.author %}Developed by <i>{{ value }}</i>{% endblocktrans %}
                    </li>
                {% endif %}
                <li>
                    {% blocktrans with value=item.library.repository.last_update|date:"SHORT_DATETIME_FORMAT" %}Last updated on {{ value }}{% endblocktrans %}
                </li>
                <li>
                    <a href="{{ item.library.repository.get_url }}" target="_blank">{{ item.library.repository.get_url }}</a>
                </li>
                <li>
                    <a href="{{ item.library.repository.get_issue_url }}" target="_blank">{% trans "Issues and proposals" %}</a>
                </li>
            </ul>

            <h4>{% trans "Module" %}</h4>
            <ul class="module-details">
                {% if item.type %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Type" %}
                            </div>
                            <div class="col-md-8">
                                {{ item.get_type_display }}
                            </div>
                        </div>
                    </li>
                {% endif %}
                {% if item.modulealias_set.count %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Aliases" %}
                            </div>
                            <div class="col-md-8">
                                {% for dataset in item.modulealias_set.all %}
                                    {{ dataset.name }}<br>
                                {% endfor %}
                            </div>
                        </div>
                    </li>
                {% endif %}
                {% if item.moduleparentrequirement_set.count %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Parent requirements" %}
                            </div>
                            <div class="col-md-8">
                                {% for dataset in item.moduleparentrequirement_set.all %}
                                    {{ dataset.uuid }}<br>
                                {% endfor %}
                            </div>
                        </div>
                    </li>
                {% endif %}
                {% if item.modulechildrequirement_set.count %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Child requirements" %}
                            </div>
                            <div class="col-md-8">
                                {% for dataset in item.modulechildrequirement_set.all %}
                                    {{ dataset.uuid }}<br>
                                {% endfor %}
                            </div>
                        </div>
                    </li>
                {% endif %}
                {% if item.moduleimplementedrequirement_set.count %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Implemented requirements" %}
                            </div>
                            <div class="col-md-8">
                                {% for dataset in item.moduleimplementedrequirement_set.all %}
                                    {{ dataset.uuid }}<br>
                                {% endfor %}
                            </div>
                        </div>
                    </li>
                {% endif %}
            </ul>

            <h4>{% trans "Library" %}</h4>
            <ul class="module-details">
                <li>
                    <div class="row">
                        <div class="col-md-4">
                            {% trans "Name" %}
                        </div>
                        <div class="col-md-8">
                            <a href="{% url "symcon_library" library_id=item.library.uuid %}">
                                {{ item.library.name }}
                            </a>
                        </div>
                    </div>
                </li>
                {% if item.library.version %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Version" %}
                            </div>
                            <div class="col-md-8">
                                {{ item.library.version }}
                            </div>
                        </div>
                    </li>
                {% endif %}
                {% if item.library.build %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Build number" %}
                            </div>
                            <div class="col-md-8">
                                {{ item.library.build }}
                            </div>
                        </div>
                    </li>
                {% endif %}
                {% if item.library.date %}
                    <li>
                        <div class="row">
                            <div class="col-md-4">
                                {% trans "Date" %}
                            </div>
                            <div class="col-md-8">
                                {{ item.library.date }}
                            </div>
                        </div>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
{% endblock %}
